<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
        <title>GitWatch</title>
	
	<meta name="description" content="A live feed of Github repositories.">
	<meta name="viewport" content="width=1024, user-scalable=no">
</head>
<body>
        <h1>Commits</h1>
        <ul id="commits"></ul>
<!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="jquery-1.7.min.js"><\/script>')</script>
<script type="text/javascript" src="/_ah/channel/jsapi"></script>

<script>
function onOpened() {
        console.log("OPENED");
}

function onMessage(data) {
        console.log("Message: "+JSON.stringify(data));
}

function onError(err) {
        console.log("Error: "+JSON.stringify(err));
}

function onClose() {
        console.log("CLOSED");
}

$(function() {
        channel = new goog.appengine.Channel('{{ token }}');
        socket = channel.open();
        socket.onopen = onOpened;
        socket.onmessage = onMessage;
        socket.onerror = onError;
        socket.onclose = onClose;
});
</script>

</body>
</html>
